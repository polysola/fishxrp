<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Feeding Frenzy </title>

    <!--  <link rel="icon" tybe="image/x-icon" href="images/dumy_fish.gif"> -->
    <link rel="icon" tybe="image/x-icon" href="images/favicon.gif">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

    <link rel="stylesheet" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="css/main.css" />


    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-firestore.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

</head>

<body>

    <div id="load" class="text-center animated">
        <img src="Div/Welcome/logo.png" width="40%">
        <div id="loader"> </div>
    </div>


    <video id="backgroundVideo" playsinline autoplay muted loop>


        <source id="backgroundWebm" src="videos/background.webm" type="video/webm">
        <!-- <source src="videos/background.mp4" type="video/mp4"> -->

    </video>

    <section id="select" class="text-center animated ">
        <img src="Div/Welcome/logo.png" width="40%">
        <br>
        <button class="transperant-btn" onclick="selectUp(),setPlayerNumber(1),startGame()">
            <img src="Div/Select/Char1.png" width="40%">
        </button>
        <button class="transperant-btn" onclick="selectUp(),setPlayerNumber(3),startGame()">
            <img src="Div/Select/Char2.png" width="40%">
        </button>


    </section>


    <section id="EnterNameSec" class="text-center animated  ">
        <img src="Div/Welcome/logo.png" width="40%">
        <div class="container">
            <div id="loading" class="loading">Loading...</div>
            <div class="row">
                <div class="col">
                    <div class="score-table-container">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Score</th>
                                </tr>
                            </thead>
                            <tbody id="userData">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <br>

        <div class="input-container">
            <div class="avatar-wrapper">
                <img src="images/default-avatar.png" id="userAvatar" alt="User Avatar">
            </div>
            <input type="text" class="form-control" placeholder="Enter your Name" id="nameEnter">
            <button type="submit" id="btnGame" class="btn-start">
                <img class="start-img" src="images/Start/Start.png" alt="Start Game">
            </button>
        </div>

    </section>
    <div id='board' class="text-center">




        <div id='scoreDiv'>
            <img src='images/Header Content/Score.png' id='scoreImg'></img>
            <div id='scoreNumDiv'>
                <img class='scoreNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='scoreNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='scoreNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='scoreNum' src='images/Characters/numbers/0-blue.png'></img>
            </div>
        </div>

        <div id='growthDiv'>
            <img src='images/Header Content/Growth.png' id='growthImg'></img>
            <div id='growthBarTotal'>
                <div id='progressNotch1'></div>
                <div id='progressNotch2'></div>
                <div id='growthBarActual'></div>
            </div>
        </div>

        <div id='levelDiv'>
            <img src='images/Header Content/Level.png' id='levelImg'></img>
            <img id='levelNum' src='images/Characters/numbers/1-blue.png'></img>
        </div>

        <div id='liveDiv'>
            <img id='charImg'></img>
            <div id='liveNumDiv'>
                <img class='liveNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='liveNum' src='images/Characters/numbers/0-blue.png'></img>
            </div>
        </div>

        <div id='menuDiv'>
            <img src='images/Header Content/menu.png' id='menuImg'></img>
            <div id='menuCharDiv'>
                <img class='menuChar' src='images/Characters/player1-right.gif'></img>
                <img class='menuChar' src='images/Characters/player1-right.gif'></img>
                <img class='menuChar' src='images/Characters/player1-right.gif'></img>
            </div>
        </div>

        <div id='seaStarDiv'>
            <img src='images/Bonus/seaStar.png' id='seaStarImg'></img>
            <img id='seaStarNum' src='images/Characters/numbers/0-blue.png'></img>
        </div>

        <div id="timer" class="time">

            <div id='hour'>
                <img class='hourNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='hourNum' src='images/Characters/numbers/0-blue.png'></img>
            </div>

            <!--   <div id='leftColon'>:</div> -->

            <div id='min'>
                <img class='minNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='minNum' src='images/Characters/numbers/0-blue.png'></img>
            </div>

            <!--  <div id='rightColon'>:</div> -->

            <div id='second'>
                <img class='secondNum' src='images/Characters/numbers/0-blue.png'></img>
                <img class='secondNum' src='images/Characters/numbers/0-blue.png'></img>
            </div>
        </div>

        <div id='badgeDiv'>
            <img src='images/Header Content/Badge.png' id='badgeImg'></img>
            <div id='playerBadgesDiv'>
                <img class='bad' src="./images/Badges/TimeBadge1.png"></img>
                <img class='bad' src="./images/Badges/TimeBadge2.png"></img>
                <img class='bad' src="./images/Badges/TimeBadge3.png"></img>
                <img class='bad' src="./images/Badges/HighScore.png"></img>
                <img class='bad' src="./images/Badges/Champion.png"></img>
            </div>
        </div>

    </div>

    <div id="gameOver" class="text-center gameOver animated">
        <img src='Div/GameOver/Gameover.png'>
        <br />

        <button id='exitBtn' onclick="exit()"><img width='80%' src='images/Header Content/exit.png'>
        </button>
        <button id='playAgain1' onclick="gameOverUp(),startGame()"><img width='100%' src='Div/Select/playagain.png'>
        </button>
        <button id='badgeBtn' onclick="viewBadges()"><img width='100%' src='images/Header Content/Badge.png'>
        </button>
    </div>

    <div id="CongDiv" class="text-center gameOver animated">
        <img src='images/Badges/congratulations.png'>
        <br />
        <button id='exitBtn' onclick="exit()"><img width='100%' src='images/Header Content/exit.png'>
        </button>
        <button id='playAgain2' onclick="congUp(),startGame()"><img width='100%' src='Div/Select/playagain.png'>
        </button>
        <button id='badgeBtn' onclick="viewBadges()"><img width='100%' src='images/Header Content/Badge.png'>
        </button>
    </div>


    <div id="container">
        <img id='seaStar' src='images/Bonus/seaStar.png'></img>
        <img id="fishPlayer" width=100 height=60 src="./images/Characters/player1-left.gif"
            style="left: 48%;top:49%;position: relative" />
    </div>

    <div id='currentPlayerBadges' class="text-center animated" style="display:none;">
        <img src='images/Header Content/Badge.png' id='finalBadgeImg'></img>
        <div id='playerBadgesDiv text-center'>
            <div class="row">
                <img class='finalBadges col-md-2' src="./images/Badges/TimeBadge1.png"></img>
                <img class='finalBadges col-md-2' src="./images/Badges/TimeBadge2.png"></img>
                <img class='finalBadges col-md-2' src="./images/Badges/TimeBadge3.png"></img>
                <img class='finalBadges col-md-2' src="./images/Badges/HighScore.png"></img>
                <img class='finalBadges col-md-2' src="./images/Badges/Champion.png"></img>
            </div>
            <button id='backBtn' onclick="hideBadges()"><img src="Div/Welcome/back.png">
            </button>
        </div>
    </div>



    <audio id="eat" type="audio/wav" src="sound/eat.wav" preload="auto" controls="none" style="display: none;"></audio>
    <audio id="die" type="audio/wav" src="sound/die.wav" preload="auto" controls="none" style="display: none;"></audio>
    <audio id="level" type="audio/wav" src="sound/levelUp.wav" preload="auto" controls="none"
        style="display: none;"></audio>
    <audio id="underWater" type="audio/wav" src="sound/underWater.wav" preload="auto" controls="none"
        style="display: none;"></audio>
    <audio id="sizeUp" type="audio/wav" src="sound/size_up.wav" preload="auto" controls="none"
        style="display: none;"></audio>
    <audio id="gameOverSound" type="audio/wav" src="sound/GameOver.wav" preload="auto" controls="none"
        style="display: none;"></audio>
    <audio id="congSound" type="audio/wav" src="sound/congratulation.wav" preload="auto" controls="none"
        style="display: none;"></audio>


    <script src="js/init.js"></script>
    <script src="js/EnemyFish.js"></script>
    <script src="js/specialFish.js"></script>
    <script src="js/Sound.js"></script>
    <script src="js/board.js"></script>
    <script src="js/EnemyFishesCreationAndMovement.js"></script>
    <script src="js/scoreAndLevel.js"></script>
    <script src="js/CollisionDetection.js"></script>
    <script src="js/UpAndDownDivs.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/randomMotion.js"></script>
    <script src="js/seaStar.js"></script>
    <script src="js/localStorageFunctions.js"></script>
    <script src="js/finalBadges.js"></script>
    <script src="js/main.js"></script>

    <script>
        const db = firebase.firestore();


        function getAllUsersAndScores() {
            document.getElementById('loading').style.display = 'block';
            db.collection("Database")
                .get()
                .then((querySnapshot) => {
                    let tableBody = document.getElementById('userData');
                    tableBody.innerHTML = ''; // Xóa dữ liệu cũ

                    querySnapshot.forEach((doc) => {
                        let row = tableBody.insertRow();
                        let cell1 = row.insertCell(0);
                        let cell2 = row.insertCell(1);
                        cell1.textContent = doc.id;
                        cell2.textContent = doc.data().Score;
                    });
                    document.getElementById('loading').style.display = 'none';
                })
                .catch((error) => {
                    console.log("Error getting documents: ", error);
                    document.getElementById('loading').textContent = 'Err.';
                });
        }


        document.addEventListener('DOMContentLoaded', getAllUsersAndScores);
    </script>


</body>

</html>